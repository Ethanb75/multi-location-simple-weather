<!DOCTYPE html>
<html>
<meta charset="utf-8">

<head>
	<title>Weather</title>
	<style>
		.weatherForm {
			text-align: center
		}
		.module {
			padding: 1rem;
			margin: .5rem;
			box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);
		}

	</style>
</head>
<body>
<div class="weatherForm">
	<form id="form">
		<label for="citySearch">City (i.e. Austin)</label>
		<input id="citySearch" type="text" name="citySearch">
		<label for="stateSearch">State (i.e. tx)</label>
		<input id="stateSearch" type="text" name="stateSearch">
		<input type="submit" name="submit" value="New Location">
	</form>
</div>
<hr>
<div id="here">
	<div class="module" data-count="0" hidden>
			<h4>Weather for: Loading...</h4>
			<ul>
				<li id="date">Loading...</li>
				<li id="weather">Loading...</li>
				<li id="temp">Loading...</li>
			</ul>
	</div>
</div>
<script type="text/javascript">
// const $form = document.getElementById('form'),
// 			$date = do cument.getElementById('date'),
// 			$weather = document.getElementById('weather'),
// 			$temp = document.getElementById('temp'),
// 			$there = document.getElementById('there'),
// 			$here = document.getElementById('here');

// const updateWeather = function weatherFunc( weatherObj, module_number, cityQ ) {
// 		let curr_module = document.querySelector(`[data-count="${module_number}"]`);
// 		let title = curr_module.children[0];
// 		let module_arr = curr_module.children[1].children;

// 		title.textContent = `Weather for: ${cityQ}`;
// 		module_arr.date.textContent = weatherObj.date;
// 		module_arr.weather.textContent = weatherObj.text;
// 		module_arr.temp.textContent = weatherObj.temp;
// };
// const getForecast = function thar(city, state) {
//     var statement = `select * from weather.forecast where woeid in (select woeid from geo.places(1) where text="${ city }, ${ state }")`
//     let url = 'https://query.yahooapis.com/v1/public/yql?format=json&q=' + statement;
//     // TODO add cache logic here
//     // Fetch the latest data.
//     var request = new XMLHttpRequest();
//     request.onreadystatechange = function() {
//       if (request.readyState === XMLHttpRequest.DONE) {
//         if (request.status === 200) {
//           var response = JSON.parse(request.response);
//           var results = response.query.results.channel;
//           var title = results.item.title;
// 					console.log(results.item.condition);
//           return updateWeather(results.item.condition, 1, city);
//         }
//       } else if (request.readyState === XMLHttpRequest.LOADING) {
//       		console.log('loading');
//       }
//     };
//     request.open('GET', url);
//     request.send();
//   };
// $form.addEventListener('submit', function(e){
// 		let city = document.getElementById('citySearch').value;
// 		let state = document.getElementById('stateSearch').value;
// 		e.preventDefault();
// 		document.getElementById('citySearch').value = '';
// 		document.getElementById('stateSearch').value = '';
// 		getForecast(city, state);
// 	});

// 	//use with progress event
// 	function updateProgress (oEvent) {
// 	  if (oEvent.lengthComputable) {
// 	    var percentComplete = oEvent.loaded / oEvent.total;
// 	    console.log(percentComplete);
// 	  } else {
// 	    console.log('?');
// 	  }
// 	};
// 	function getCityList() {
// 		let req = new XMLHttpRequest();
// 		req.addEventListener("load", function(){
// 			console.log('load event');
// 			if(req.status === 200){
// 				const resObj = JSON.parse(req.responseText);
// 				const locationsArr = resObj.locations;
// 				console.log(locationsArr.length);
// 				// document.getElementById('here').textContent = 
// 			} else {
// 				console.log('something else');
// 			}
// 		});
// 		req.open("GET", "data/LocationHistory.json");
// 		req.setRequestHeader('Content-type','application/json')
// 		req.send();
// 	};
// // }());

</script>
<script src="app.js"></script>
</body>
</html>